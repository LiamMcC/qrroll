<%- include('../partials/header') -%>
      <div class="container">

    <h1>All QR Codes For all students</h1> 
    <p>Click on the students name to see the QR Code for that sutdent. You can send the entire list of QR Codes by pressint the send them button.
      <br>This will send all codes to all students uploaded through a CSV file
      

    </p>
    
   



<div class="rcontainer">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Student No</th>
                <th>Class</th>
                <th>First Name</th>
                <th>Surname</th>

            </tr>
        </thead>
        <tbody>
            <% result.forEach(item => { %>
                <tr>
                    <td><%= item.id %></td>
                    <td><span onclick="showAlert('<%= item.codename %>')"><%= item.studentNo %> <i class="fa fa-qrcode"></i></span></td>
                    <td><%= item.class %></td>
                    <td><%= item.fname %></td>
                    <td><%= item.sname %></td>
              
                </tr>
            <% }); %>
        </tbody>
    </table>

  </div>
  <br>
  <br>
  <a href="/sendallcodes" class="button" style="background-color:black;">Send Them All</a>
  



  <script>
    // Function to display SweetAlert with image
    function showAlert(item) {
      const imageUrl = `<img src="${item}">`;
      swal({
        title: 'Student QR Code Image',
        content: {
          element: 'div',
          attributes: {
            innerHTML: imageUrl
          }
        },
        buttons: {
          close: true
        }
      });
    }
  </script>
  
</div>
<%- include('../partials/footer') -%>
</body>
</html>
